<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./main.css">
        <title>Lista de Convidados</title>
    </head>
    <body>
        <div id="app">
            <h1>Lista de Convidados</h1>
            <ul id="lista"></ul>
            
            <input type="text" placeholder="Digite o nome do convidado" id="campo1">
            <input type="text" placeholder="Digite a idade do convidado" id="campo2">
            <button id="botao">Cadastrar</button>
        </div>

        <script type="text/javascript">
        // código js
        
        // declarando variaveis linkados com elementos html
        var elLista = document.getElementById("lista");
        var elCampo1 = document.getElementById("campo1");
        var elCampo2 = document.getElementById("campo2");
        var elBotao = document.getElementById("botao");

        // declarando array em JSON
        var convidados = [
            { id: 1, nome: "Bruno de Souza", idade: 28 },
            { id: 2, nome: "Jefferson Andrade", idade: 18 },
            { id: 3, nome: "Maria Josépha", idade: 13 }
        ]
        
        function listarConvidados() {
            elLista.innerHTML = "";

            // percorre a lista em JSON 'convidados' 
            for (const convidado of convidados) {
                // cria um elemento html li para cada convidado
                var elConvidado = document.createElement("li");
                // criando variaveis e linkando por id's
                var elConv = document.createTextNode(`${convidado.id} - ${convidado.nome}, ${convidado.idade}`);

                // criando variavel elExcluir com tag de link
                var elExcluir = document.createElement("a");
                // criando variavel para exibir texto dentro da tag de elExcluir
                var elTextoExcluir = document.createTextNode("Excluir")

                // criando função excluir
                elExcluir.onclick = function() {
                    convidados = convidados.filter(function(item) {
                        return item.id !== convidado.id;
                    });
                    // chamando a função de listarConvidados
                    listarConvidados();
                };

                // inserindo elementos em elConvidado
                elConvidado.appendChild(elConv);
                elConvidado.appendChild(elExcluir);
                // inserindo elExcluirTexto ao elExcluir
                elExcluir.appendChild(elTextoExcluir);

                // inserindo todo o elConvidado em elLista
                elLista.appendChild(elConvidado);
            }
        }
        // chamando a função de listarConvidados
        listarConvidados();

        // criando função de adicionarConvidado
        elBotao.onclick = function() {
            // colocando o valor dos campos na variável nome
            var nome = elCampo1.value;
            var idade = elCampo2.value;

            // criado condição para adicionar id apenas se os campos de nome e idade forem vazios
            if(nome !== "" && idade !== "") {
                // declara variável id que recebe o tamanho do array + 1 (pois, o index começa em 0)
                var id = convidados.length + 1;
                // adicionando id, nome e idade na lista convidados
                convidados.push({  id: id, nome: nome, idade: idade});
                // limpa os campo
                elCampo1.value = "";
                elCampo2.value = "";
                // chamando a função listarConvidados
                listarConvidados();
            }
        };
        </script>
    </body>
</html>